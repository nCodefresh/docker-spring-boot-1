version: '1.0'
steps:

#  pre_deploy:
#    image: garland/aws-cli-docker
#    commands:
#      - aws --version # your command to stop task
#    environment:
#      - AWS_ACCESS_KEY_ID=${{AWS_ACCESS_KEY_ID}}
#      - AWS_SECRET_ACCESS_KEY=${{AWS_SECRET_ACCESS_KEY}}
#      - AWS_DEFAULT_REGION=${{AWS_DEFAULT_REGION}}
#  slack_notify:
#    image: tutum/curl
#    commands:
#      - >-
#        curl -X POST --data-urlencode 'payload={"text":"New RF-images pushed with tag: ${{CF_BRANCH_TAG_NORMALIZED}}-${{CF_SHORT_REVISION}}-${{CF_BUILD_TIMESTAMP}}"}' ${{SLACK_WEB_URL}}
#



  build_step:
    type: build
    title: Building Docker Image
    image_name: ncodefresh/docker-spring-boot
    working_directory: ${{main_clone}}
    dockerfile: Dockerfile
    when:
      condition:
        all:
          skip_tests_in_commit_message: |
              includes(lower("${{CF_COMMIT_MESSAGE}}"), "cf-skip-tests") == false