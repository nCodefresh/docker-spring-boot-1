version: '1.0'

steps:
  build-step-name:
    type: build
    description: spring maven project
    image-name: ncodefresh/docker-spring-boot-1
    dockerfile: Dockerfile
    tag: latest
    when:
      condition:
        all:
            noSkipCiInCommitMessage: |
              includes(lower("${{CF_COMMIT_MESSAGE}}"), "--skip-ci") == false

  freestyle_step:
    image: node:latest
    entry_point:
      - bash
      - c
    commands:
      - node -version
      - >-
        if [[ -z ${{CF_BRANCH}} ]]; then
          echo test
        fi

#  push-to-dockerhub:
#    type: push
#    candidate: ${{build-step-name}}
#    tag: latest

#
#  composition-step:
#    type: composition
#    composition-candidates:
#      docker-spring-boot:
#        image: 'ncodefresh/docker-spring-boot:latest'
#        ports:
#          - 8080
#    composition-variables:
#      - IMAGE_NAME=docker-spring-boot
